steps:
  # Langkah 1: Build Docker Image (Path ke Dockerfile sekarang di root)
- name: 'gcr.io/cloud-builders/docker'
  args: [
    'build', 
    '-t', 'asia-southeast1-docker.pkg.dev/$PROJECT_ID/cloud-run-images/aircraft-backend:$COMMIT_SHA', 
    '-f', 'Dockerfile', # Hapus 'backend/' karena file ada di root
    '.' 
  ]

# Langkah 2: Push Image ke Artifact Registry
- name: 'gcr.io/cloud-builders/docker'
  args: ['push', 'asia-southeast1-docker.pkg.dev/$PROJECT_ID/cloud-run-images/aircraft-backend:$COMMIT_SHA']

options:
  logging: CLOUD_LOGGING_ONLY